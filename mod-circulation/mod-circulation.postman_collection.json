{
	"info": {
		"_postman_id": "d7d7f7d2-bff1-4072-94d5-08ae4b589fa9",
		"name": "mod-circulation",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "schemas",
			"description": null,
			"item": [
				{
					"name": "error.schema",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5e952041-5ba6-4602-8b63-0549e94a6a4f",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"GET schema_error OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"GET schema_error has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_error_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/raml/master/schemas/{{schema_error}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"raml",
								"master",
								"schemas",
								"{{schema_error}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "errors.schema",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f708b061-026b-44d6-92ba-dff26a1b6a94",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_errors_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/raml/master/schemas/{{schema_errors}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"raml",
								"master",
								"schemas",
								"{{schema_errors}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "metadata.schema",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "105282cc-4e6f-48e8-982e-d7134cac2578",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"GET schema_metadata OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"GET schema_metadata has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_metadata_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/raml/master/schemas/{{schema_metadata}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"raml",
								"master",
								"schemas",
								"{{schema_metadata}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "parameters.schema",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ad455e26-7dc6-4d08-a023-8910e4368b53",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"GET schema_parameters OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"GET schema_parameters has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_parameters_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/raml/master/schemas/{{schema_parameters}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"raml",
								"master",
								"schemas",
								"{{schema_parameters}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "loans.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "568864fa-8195-4f4d-b493-e89d1000cd02",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_loans_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/{{schema_loans}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"{{schema_loans}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "loan.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3d61b853-1f82-44a4-844a-3734a758a26b",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_loan_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/{{schema_loan}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"{{schema_loan}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "loan-rules.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "236e989e-480f-4c76-9222-31f562c5e928",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_loan-rules_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/schema/{{schema_loan-rules}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"schema",
								"{{schema_loan-rules}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "loan-rule-matches.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "cf5d1ce9-0e20-4429-a66b-3cbc5d9374f5",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_loan-rule-matches_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/schema/{{schema_loan-rule-matches}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"schema",
								"{{schema_loan-rule-matches}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "loan-rule-match.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e6882098-61ac-4758-882b-90e0a1793d3c",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_loan-rule-match_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/schema/{{schema_loan-rule-match}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"schema",
								"{{schema_loan-rule-match}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "loan-policy-id.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "35694807-fd46-4fbb-8249-fd0acb02b38b",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_loan-policy-id_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/schema/{{schema_loan-policy-id}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"schema",
								"{{schema_loan-policy-id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "requests.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ee262032-8630-4ed3-918f-447e91da1e92",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_requests_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/{{schema_requests}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"{{schema_requests}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "request.json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "51ae954e-38b7-4f42-a992-3b30a6016460",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Response OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_request_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{schema_loc}}/{{mod_name}}/{{mod_version}}//ramls/{{schema_request}}",
							"host": [
								"{{schema_loc}}"
							],
							"path": [
								"{{mod_name}}",
								"{{mod_version}}",
								"",
								"ramls",
								"{{schema_request}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "authentication",
			"description": null,
			"item": [
				{
					"name": "authn/login",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2c7d7898-4217-46d0-867d-d66f57fb4072",
								"type": "text/javascript",
								"exec": [
									"var token = postman.getResponseHeader(\"x-okapi-token\")",
									"pm.environment.set(\"xokapitoken\", token);",
									"",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"",
									"//verify headers",
									"pm.test(\"'Content-Type'header is present and has 'application/json' value\", function () {",
									"    pm.response.to.have.header(\"Content-Type\");",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.be.equal(\"application/json\");",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"",
									"pm.test(\"'accept' header is present and has correct value\", function () {",
									"    pm.response.to.have.header(\"accept\");",
									"    pm.expect(pm.response.headers.get(\"accept\")).to.be.equal(\"*/*\"); ",
									"});",
									"",
									"pm.test(\"'accept-encoding' header is present and has correct value\", function () {",
									"    pm.response.to.have.header(\"accept-encoding\");",
									"    pm.expect(pm.response.headers.get(\"accept-encoding\")).to.be.equal(\"gzip, deflate\");",
									"});",
									"",
									"",
									"pm.test(\"'connection' header is present and has correct value\", function () {",
									"    pm.response.to.have.header(\"connection\");",
									"    pm.expect(pm.response.headers.get(\"connection\")).to.be.equal(\"keep-alive\");",
									"});",
									"",
									"pm.test(\"'host' header is present\", function () {",
									"    pm.response.to.have.header(\"host\");",
									"   // var hostHeaderValue = pm.environment.get(\"url\") + \":\" + pm.environment.get(\"okapiport\");",
									"   // pm.expect(pm.response.headers.get(\"host\")).to.be.equal(hostHeaderValue);",
									"});",
									"",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"// pm.test(\"'x-okapi-permissions-required' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-permissions-required\");",
									"// });",
									"",
									"pm.test(\"'x-okapi-permissions' header is present\", function () {",
									"    pm.response.to.have.header(\"x-okapi-permissions\");",
									"});",
									"",
									"pm.test(\"'x-okapi-request-id' header is present\", function () {",
									"    pm.response.to.have.header(\"x-okapi-request-id\");",
									"});",
									"",
									"pm.test(\"'x-okapi-tenant' header is present and has correct value\", function () {",
									"    pm.response.to.have.header(\"x-okapi-tenant\");",
									"    pm.expect(pm.response.headers.get(\"x-okapi-tenant\")).to.be.equal(pm.environment.get(\"xokapitenant\"));",
									"});",
									"",
									"pm.test(\"'x-okapi-token' header is present and has correct value\", function () {",
									"    pm.response.to.have.header(\"x-okapi-token\");",
									"    pm.expect(pm.response.headers.get(\"x-okapi-token\")).to.be.equal(pm.environment.get(\"xokapitoken\"));",
									"});",
									"",
									"pm.test(\"'x-okapi-url' header is present\", function () {",
									"    pm.response.to.have.header(\"x-okapi-url\");",
									"});",
									"",
									"// pm.test(\"'x-okapi-user-id' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-user-id\");",
									"// });",
									"",
									"",
									"",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"username\":\"{{username}}\",\"password\":\"{{password}}\"}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/authn/login",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"authn",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "setting test data",
			"description": null,
			"item": [
				{
					"name": "/users -active",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "49d30306-1952-4c72-a37b-99e44888d5b8",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"let len = response.users.length;",
									"if(len > 0){",
									"    pm.environment.set(\"circ_test_userid\", response.users[len-1].id);",
									"     pm.environment.set(\"circ_test_userbarcode\", response.users[len-1].barcode);",
									"}   ",
									"else {",
									"       console.log('NO USERS FOUND - ENVIRONMENT NOT SET PROPERLY TO RUN TESTS');",
									"}",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/users?limit=10&query=active=true",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"users"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "query",
									"value": "active=true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/users - inactive",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7bdf3b21-6686-459e-914d-14694f749c63",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"let len = response.users.length;",
									"if(len > 0){",
									"    pm.environment.set(\"circ_test_inactive_userid\", response.users[len-1].id);",
									"     pm.environment.set(\"circ_test_inactive_userbarcode\", response.users[len-1].barcode);",
									"}   ",
									"else {",
									"       console.log('NO USERS FOUND - ENVIRONMENT NOT SET PROPERLY TO RUN TESTS');",
									"}",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/users?limit=10&query=active=false",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"users"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "query",
									"value": "active=false"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/users -proxy",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ef59ae39-8576-46d1-80fb-8a6013692568",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"if(response.totalRecords > 0){",
									"    pm.environment.set(\"circ_test_useridproxyfor\", response.users[len-1].id);",
									"    pm.environment.set(\"circ_test_userbarcodeproxyfor\", response.users[len-1].barcode);",
									"}   ",
									"else {",
									"       console.log('NO PROXY FOUND - ENVIRONMENT NOT SET PROPERLY TO RUN TESTS');",
									"}",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/proxiesfor",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"proxiesfor"
							]
						}
					},
					"response": []
				},
				{
					"name": "/users -test user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "18ff6ffb-488d-4912-bf15-615f0a666abd",
								"type": "text/javascript",
								"exec": [
									"",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"    console.log(pm.response.json());",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/users/{{circ_test_userid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"users",
								"{{circ_test_userid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/inventory/items - available",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "fbe131d7-7106-45d2-9cf8-c264a50ffd12",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"let len = response.items.length;",
									"",
									"if(len > 0){",
									"    pm.environment.set(\"circ_test_itemid\", response.items[len-1].id);",
									"    pm.environment.set(\"circ_test_itembarcode\", response.items[len-1].barcode);",
									"}",
									"else {",
									"      console.log('NO ITEMS FOUND - ENVIRONMENT NOT SET PROPERLY TO RUN THE TESTS');",
									"",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/inventory/items?limit=10&query=(status.name=Available*)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"inventory",
								"items"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "query",
									"value": "(status.name=Available*)"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/inventory/items - test item",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d10c5f84-7646-43f5-bcf2-85b1d333a7b9",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"    console.log(pm.response.json());",
									"});",
									"",
									"",
									"let len = response.items.length;",
									"",
									"if(len > 0){",
									"    pm.environment.set(\"circ_test_itemid\", response.items[len-1].id);",
									"    pm.environment.set(\"circ_test_itembarcode\", response.items[len-1].barcode);",
									"}",
									"else {",
									"      console.log('NO ITEMS FOUND - ENVIRONMENT NOT SET PROPERLY TO RUN THE TESTS');",
									"",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/inventory/items?limit=10&query=(barcode={{circ_test_itembarcode}})",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"inventory",
								"items"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "query",
									"value": "(barcode={{circ_test_itembarcode}})"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/inventory/items - checked out",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "91a0b3ac-3342-46a6-9517-e4f5a5b13e4e",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"let len = response.items.length;",
									"",
									"if(len > 0){",
									"    pm.environment.set(\"circ_test_checkeditemid\", response.items[len-1].id);",
									"     pm.environment.set(\"circ_test_checkedbarcode\", response.items[len-1].id);",
									"}",
									"else {",
									"      console.log('NO ITEMS FOUND - ENVIRONMENT NOT SET PROPERLY TO RUN THE TESTS');",
									"",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/inventory/items?limit=10&query=(status.name=Checked out)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"inventory",
								"items"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "query",
									"value": "(status.name=Checked out)"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "circulation/check-out-by-barcode",
			"description": "",
			"item": [
				{
					"name": "positive",
					"description": "",
					"item": [
						{
							"name": "check-out-by-barcode - required fields only",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d9ebed85-4fd9-4c62-a0f3-359cf2e5e837",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 201\", function () {",
											"    pm.response.to.have.status(\"Created\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id} - returning item",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f328235f-0e2f-476e-be7d-52a5f59f2cb8",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
										"type": "text/javascript",
										"exec": [
											"let today = new Date();",
											"let day = today.getDate();",
											"let month = today.getMonth() + 1; //January is 0!",
											"let year = today.getFullYear();",
											"",
											"if(day < 10) {",
											"    day = '0' + day;",
											"} ",
											"",
											"if(month < 10) {",
											"    month = '0'+ month;",
											"} ",
											"",
											"today = year + \"-\" + month + \"-\" + day;",
											"",
											"console.log(today);",
											"pm.variables.set(\"today\", today);"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkedin\",\n\"status\": {\n        \"name\": \"Closed\"\n    }\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id}  - delete loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "90b9aea6-80f5-46b6-878a-a3f7d3477e70",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans{id} - verify delete",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "afdfa2c8-33de-4103-82ad-784b64a041dc",
										"type": "text/javascript",
										"exec": [
											"",
											"pm.test(\"Status is 404\", function () {",
											"    pm.response.to.have.status(\"Not Found\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"// pm.environment.unset(\"circ_test_userid\");",
											"// pm.environment.unset(\"circ_test_itemid\");",
											"// pm.environment.unset(\"test_recipientId\");",
											"// pm.environment.unset(\"generic_loanid\");",
											"// pm.environment.unset(\"loanRulesAsTextFile\");",
											"// pm.environment.unset(\"newrequestid\");",
											"",
											"",
											"// //schema variables",
											"// pm.environment.unset(\"schema_parameters_content\");",
											"// pm.environment.unset(\"schema_error_content\");",
											"// pm.environment.unset(\"schema_errors_content\");",
											"// pm.environment.unset(\"schema_metadata_content\");",
											"// pm.environment.unset(\"schema_loans_content\");",
											"// pm.environment.unset(\"schema_loan_content\");",
											"// pm.environment.unset(\"schema_loan-rules_content\");",
											"// pm.environment.unset(\"schema_loan-rule_content\");",
											"// pm.environment.unset(\"schema_loan-rule-matches_content\");",
											"// pm.environment.unset(\"schema_loan-rule-match_content\");",
											"// pm.environment.unset(\"schema_requests_content\");",
											"// pm.environment.unset(\"schema_request_content\");",
											"// pm.environment.unset(\"schema_loan-policy-id_content\");",
											"",
											"",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode -- required fields only and loanDate",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d9ebed85-4fd9-4c62-a0f3-359cf2e5e837",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 201\", function () {",
											"    pm.response.to.have.status(\"Created\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
										"type": "text/javascript",
										"exec": [
											"let today = new Date();",
											"let day = today.getDate();",
											"let month = today.getMonth() + 1; //January is 0!",
											"let year = today.getFullYear();",
											"",
											"if(day < 10) {",
											"    day = '0' + day;",
											"} ",
											"",
											"if(month < 10) {",
											"    month = '0'+ month;",
											"} ",
											"",
											"today = year + \"-\" + month + \"-\" + day;",
											"",
											"console.log(today);",
											"pm.variables.set(\"today\", today);"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\",\n\"loanDate\": \"{{today}}\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id} - returning item",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f328235f-0e2f-476e-be7d-52a5f59f2cb8",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
										"type": "text/javascript",
										"exec": [
											"let today = new Date();",
											"let day = today.getDate();",
											"let month = today.getMonth() + 1; //January is 0!",
											"let year = today.getFullYear();",
											"",
											"if(day < 10) {",
											"    day = '0' + day;",
											"} ",
											"",
											"if(month < 10) {",
											"    month = '0'+ month;",
											"} ",
											"",
											"today = year + \"-\" + month + \"-\" + day;",
											"",
											"console.log(today);",
											"pm.variables.set(\"today\", today);"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkedin\",\n\"status\": {\n        \"name\": \"Closed\"\n    }\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id}  - delete loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "90b9aea6-80f5-46b6-878a-a3f7d3477e70",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - additional property",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c7bc7889-724c-4f7f-8d87-686900aa35d0",
										"type": "text/javascript",
										"exec": [
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 201\", function () {",
											"    pm.response.to.have.status(\"Created\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\",\n\"additionalProperty\": \"is allowed\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id} - returning item",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f328235f-0e2f-476e-be7d-52a5f59f2cb8",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
										"type": "text/javascript",
										"exec": [
											"let today = new Date();",
											"let day = today.getDate();",
											"let month = today.getMonth() + 1; //January is 0!",
											"let year = today.getFullYear();",
											"",
											"if(day < 10) {",
											"    day = '0' + day;",
											"} ",
											"",
											"if(month < 10) {",
											"    month = '0'+ month;",
											"} ",
											"",
											"today = year + \"-\" + month + \"-\" + day;",
											"",
											"console.log(today);",
											"pm.variables.set(\"today\", today);"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkedin\",\n\"status\": {\n        \"name\": \"Closed\"\n    }\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id}  - delete loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "90b9aea6-80f5-46b6-878a-a3f7d3477e70",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "negative",
					"description": "",
					"item": [
						{
							"name": "check-out-by-barcode - non-existent user barcode",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "87a60eff-5c7b-4394-9d2d-b55a37efdd59",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Could not find user with matching barcode\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{$guid}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - barcode of inactive user",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "7a995906-77ba-4f23-a06c-7543a50dc506",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Cannot check out to inactive user\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_inactive_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - incorrect proxy barcode",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "91bb4166-8b67-4c62-a106-2001edfc74c1",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Could not find user with matching barcode\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"proxyUserBarcode\": \"{{$guid}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - proxy via inactive user",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "75fc3db9-21b9-4567-886a-8bba55c3b392",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Cannot check out via inactive proxying user\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"proxyUserBarcode\": \"{{circ_test_inactive_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - proxy via active user to inactive user",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "1c86c124-6b15-4599-b7e1-fc872cc09e1f",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Cannot check out to inactive user\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_inactive_userbarcode}}\",\n\"proxyUserBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - invalid item barcode",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "980cbfa1-8416-4ef7-bbc0-e102b7222803",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"No item with barcode invalid_barcode could be found\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"invalid_barcode\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - required fields only - should succeed",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d9ebed85-4fd9-4c62-a0f3-359cf2e5e837",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 201\", function () {",
											"    pm.response.to.have.status(\"Created\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "check-out-by-barcode - duplicate entry",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9e5325d0-5572-4a0b-8d41-1d48225a4a09",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Item is already checked out\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "cleanup",
					"description": "",
					"item": [
						{
							"name": "/circulation/loans/{id} - returning item",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f328235f-0e2f-476e-be7d-52a5f59f2cb8",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
										"type": "text/javascript",
										"exec": [
											"let today = new Date();",
											"let day = today.getDate();",
											"let month = today.getMonth() + 1; //January is 0!",
											"let year = today.getFullYear();",
											"",
											"if(day < 10) {",
											"    day = '0' + day;",
											"} ",
											"",
											"if(month < 10) {",
											"    month = '0'+ month;",
											"} ",
											"",
											"today = year + \"-\" + month + \"-\" + day;",
											"",
											"console.log(today);",
											"pm.variables.set(\"today\", today);"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkedin\",\n\"status\": {\n        \"name\": \"Closed\"\n    }\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id}  - delete loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "90b9aea6-80f5-46b6-878a-a3f7d3477e70",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans{id} - verify delete",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "afdfa2c8-33de-4103-82ad-784b64a041dc",
										"type": "text/javascript",
										"exec": [
											"",
											"pm.test(\"Status is 404\", function () {",
											"    pm.response.to.have.status(\"Not Found\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"// pm.environment.unset(\"circ_test_userid\");",
											"// pm.environment.unset(\"circ_test_itemid\");",
											"// pm.environment.unset(\"test_recipientId\");",
											"// pm.environment.unset(\"generic_loanid\");",
											"// pm.environment.unset(\"loanRulesAsTextFile\");",
											"// pm.environment.unset(\"newrequestid\");",
											"",
											"",
											"// //schema variables",
											"// pm.environment.unset(\"schema_parameters_content\");",
											"// pm.environment.unset(\"schema_error_content\");",
											"// pm.environment.unset(\"schema_errors_content\");",
											"// pm.environment.unset(\"schema_metadata_content\");",
											"// pm.environment.unset(\"schema_loans_content\");",
											"// pm.environment.unset(\"schema_loan_content\");",
											"// pm.environment.unset(\"schema_loan-rules_content\");",
											"// pm.environment.unset(\"schema_loan-rule_content\");",
											"// pm.environment.unset(\"schema_loan-rule-matches_content\");",
											"// pm.environment.unset(\"schema_loan-rule-match_content\");",
											"// pm.environment.unset(\"schema_requests_content\");",
											"// pm.environment.unset(\"schema_request_content\");",
											"// pm.environment.unset(\"schema_loan-policy-id_content\");",
											"",
											"",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			]
		},
		{
			"name": "circulation/renew-by-barcode",
			"description": "",
			"item": [
				{
					"name": "positive",
					"description": "",
					"item": [
						{
							"name": "check-out-by-barcode - setting up the loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d9ebed85-4fd9-4c62-a0f3-359cf2e5e837",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 201\", function () {",
											"    pm.response.to.have.status(\"Created\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-barcode",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "3b798403-befd-4000-b193-3dfb3d56b071",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 200\", function () {",
											"    pm.response.to.have.status(\"OK\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"    pm.expect(response.action).to.equal(\"renewed\");",
											"    pm.expect(response.renewalCount).to.equal(1);",
											"     ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-barcode - another renew",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "1c5c03c3-2d54-44e8-a3f7-485855ac0a83",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 200\", function () {",
											"    pm.response.to.have.status(\"OK\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"    pm.expect(response.action).to.equal(\"renewed\");",
											"    pm.expect(response.renewalCount).to.equal(2);",
											"     ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-barcode"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "negative",
					"description": "",
					"item": [
						{
							"name": "renew-by-barcode - non-existent user barcode",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "67e95de1-0b37-41ca-93e0-bef531c93061",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Cannot renew item checked out to different user\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{$guid}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-barcode - additional properties",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "01144367-90a1-437d-8164-9b72a4e3e72a",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"//should not allow",
											"pm.test(\"Status is 200\", function () {",
											"    pm.response.to.have.status(\"OK\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"additionalProperties\": \"should not be allowed\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-barcode - invalid item barcode",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c9d710b0-2c5e-44a4-b054-acc6d6a2adbe",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"No item with barcode invalid-barcode exists\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"invalid-barcode\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-barcode"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "cleanup",
					"description": "",
					"item": [
						{
							"name": "/circulation/loans/{id} - returning item",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f328235f-0e2f-476e-be7d-52a5f59f2cb8",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
										"type": "text/javascript",
										"exec": [
											"let today = new Date();",
											"let day = today.getDate();",
											"let month = today.getMonth() + 1; //January is 0!",
											"let year = today.getFullYear();",
											"",
											"if(day < 10) {",
											"    day = '0' + day;",
											"} ",
											"",
											"if(month < 10) {",
											"    month = '0'+ month;",
											"} ",
											"",
											"today = year + \"-\" + month + \"-\" + day;",
											"",
											"console.log(today);",
											"pm.variables.set(\"today\", today);"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkedin\",\n\"status\": {\n        \"name\": \"Closed\"\n    }\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id}  - delete loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "90b9aea6-80f5-46b6-878a-a3f7d3477e70",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans{id} - verify delete",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "afdfa2c8-33de-4103-82ad-784b64a041dc",
										"type": "text/javascript",
										"exec": [
											"",
											"pm.test(\"Status is 404\", function () {",
											"    pm.response.to.have.status(\"Not Found\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"// pm.environment.unset(\"circ_test_userid\");",
											"// pm.environment.unset(\"circ_test_itemid\");",
											"// pm.environment.unset(\"test_recipientId\");",
											"// pm.environment.unset(\"generic_loanid\");",
											"// pm.environment.unset(\"loanRulesAsTextFile\");",
											"// pm.environment.unset(\"newrequestid\");",
											"",
											"",
											"// //schema variables",
											"// pm.environment.unset(\"schema_parameters_content\");",
											"// pm.environment.unset(\"schema_error_content\");",
											"// pm.environment.unset(\"schema_errors_content\");",
											"// pm.environment.unset(\"schema_metadata_content\");",
											"// pm.environment.unset(\"schema_loans_content\");",
											"// pm.environment.unset(\"schema_loan_content\");",
											"// pm.environment.unset(\"schema_loan-rules_content\");",
											"// pm.environment.unset(\"schema_loan-rule_content\");",
											"// pm.environment.unset(\"schema_loan-rule-matches_content\");",
											"// pm.environment.unset(\"schema_loan-rule-match_content\");",
											"// pm.environment.unset(\"schema_requests_content\");",
											"// pm.environment.unset(\"schema_request_content\");",
											"// pm.environment.unset(\"schema_loan-policy-id_content\");",
											"",
											"",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "157bef13-e6c4-455d-9c31-9d276215ee39",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "6de4d878-f472-4bc3-98da-fca0ca9f2065",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "circulation/renew-by-id",
			"description": "",
			"item": [
				{
					"name": "positive",
					"description": "",
					"item": [
						{
							"name": "check-out-by-barcode - setting up the loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d9ebed85-4fd9-4c62-a0f3-359cf2e5e837",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 201\", function () {",
											"    pm.response.to.have.status(\"Created\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userBarcode\": \"{{circ_test_userbarcode}}\",\n\"itemBarcode\":\"{{circ_test_itembarcode}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/check-out-by-barcode",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"check-out-by-barcode"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b626a238-5ea5-45df-a425-f30cd6b0f499",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 200\", function () {",
											"    pm.response.to.have.status(\"OK\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"    pm.expect(response.action).to.equal(\"renewed\");",
											"    pm.expect(response.renewalCount).to.equal(1);",
											"     ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-id",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-barcode - another renew",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "7ff66278-7625-4ba1-ae23-88eb67facd9d",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"pm.environment.set(\"barcode_checkout_id\", response.id);",
											"",
											"pm.test(\"Status is 200\", function () {",
											"    pm.response.to.have.status(\"OK\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
											"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
											"    pm.expect(response.action).to.equal(\"renewed\");",
											"    pm.expect(response.renewalCount).to.equal(2);",
											"     ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-id",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-id"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "negative",
					"description": "",
					"item": [
						{
							"name": "renew-by-id- non-existent user",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "67e95de1-0b37-41ca-93e0-bef531c93061",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"Cannot renew item checked out to different user\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{$guid}}\",\n\"itemId\":\"{{circ_test_itemid}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-id",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-id - additional properties",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "01144367-90a1-437d-8164-9b72a4e3e72a",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"//should not allow",
											"pm.test(\"Status is 200\", function () {",
											"    pm.response.to.have.status(\"OK\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"additionalProperties\": \"should not be allowed\",\n\"itemId\":\"{{circ_test_itemid}}\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-id",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "renew-by-id - invalid item",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "77308b73-dda6-4eca-848d-4b35664b9702",
										"type": "text/javascript",
										"exec": [
											"",
											"let response = JSON.parse(responseBody);",
											"",
											"pm.test(\"Status is 422\", function () {",
											"    pm.response.to.have.status(\"Unprocessable Entity\");",
											"});",
											"",
											"pm.test(\"Response must be valid and have a body\", function () {",
											"    pm.response.to.be.withBody;",
											"    pm.response.to.be.json; ",
											"});",
											"",
											"pm.test(\"Response contains correct data\", function () {",
											"    pm.expect(pm.response.json().errors[0].message).to.equal(\"No item with ID invalid-id exists\"); ",
											"});",
											"",
											"pm.test(\"Validate schema\", function () {",
											"  tv4.addSchema(\"parameters.schema\", JSON.parse(pm.variables.get(\"schema_parameters_content\")));",
											"   tv4.addSchema(\"error.schema\", JSON.parse(pm.variables.get(\"schema_error_content\")));",
											"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
											"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"",
											"",
											"",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d031aed3-8994-49a7-a0e8-569a03ce46e0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"invalid-id\"\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/renew-by-id",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"renew-by-id"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "cleanup",
					"description": "",
					"item": [
						{
							"name": "/circulation/loans/{id} - returning item",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f328235f-0e2f-476e-be7d-52a5f59f2cb8",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
										"type": "text/javascript",
										"exec": [
											"let today = new Date();",
											"let day = today.getDate();",
											"let month = today.getMonth() + 1; //January is 0!",
											"let year = today.getFullYear();",
											"",
											"if(day < 10) {",
											"    day = '0' + day;",
											"} ",
											"",
											"if(month < 10) {",
											"    month = '0'+ month;",
											"} ",
											"",
											"today = year + \"-\" + month + \"-\" + day;",
											"",
											"console.log(today);",
											"pm.variables.set(\"today\", today);"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkedin\",\n\"status\": {\n        \"name\": \"Closed\"\n    }\n\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans/{id}  - delete loan",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "90b9aea6-80f5-46b6-878a-a3f7d3477e70",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status is 204\", function () {",
											"    pm.response.to.have.status(\"No Content\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/circulation/loans{id} - verify delete",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "afdfa2c8-33de-4103-82ad-784b64a041dc",
										"type": "text/javascript",
										"exec": [
											"",
											"pm.test(\"Status is 404\", function () {",
											"    pm.response.to.have.status(\"Not Found\");",
											"});",
											"",
											"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
											"    pm.response.to.have.header(\"X-Okapi-Trace\");",
											"});",
											"",
											"",
											"// pm.environment.unset(\"circ_test_userid\");",
											"// pm.environment.unset(\"circ_test_itemid\");",
											"// pm.environment.unset(\"test_recipientId\");",
											"// pm.environment.unset(\"generic_loanid\");",
											"// pm.environment.unset(\"loanRulesAsTextFile\");",
											"// pm.environment.unset(\"newrequestid\");",
											"",
											"",
											"// //schema variables",
											"// pm.environment.unset(\"schema_parameters_content\");",
											"// pm.environment.unset(\"schema_error_content\");",
											"// pm.environment.unset(\"schema_errors_content\");",
											"// pm.environment.unset(\"schema_metadata_content\");",
											"// pm.environment.unset(\"schema_loans_content\");",
											"// pm.environment.unset(\"schema_loan_content\");",
											"// pm.environment.unset(\"schema_loan-rules_content\");",
											"// pm.environment.unset(\"schema_loan-rule_content\");",
											"// pm.environment.unset(\"schema_loan-rule-matches_content\");",
											"// pm.environment.unset(\"schema_loan-rule-match_content\");",
											"// pm.environment.unset(\"schema_requests_content\");",
											"// pm.environment.unset(\"schema_request_content\");",
											"// pm.environment.unset(\"schema_loan-policy-id_content\");",
											"",
											"",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-okapi-tenant",
										"value": "{{xokapitenant}}"
									},
									{
										"key": "x-okapi-token",
										"value": "{{xokapitoken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{barcode_checkout_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url}}"
									],
									"port": "{{okapiport}}",
									"path": [
										"circulation",
										"loans",
										"{{barcode_checkout_id}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "157bef13-e6c4-455d-9c31-9d276215ee39",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "6de4d878-f472-4bc3-98da-fca0ca9f2065",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "circulation/loans - positive scenarios",
			"description": null,
			"item": [
				{
					"name": "/circulation/loans",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c41c8c61-a3e6-48a8-94bc-bf968706761c",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   tv4.addSchema(\"loan.json\", JSON.parse(pm.environment.get(\"schema_loan_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loans_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "531fb774-242a-443f-8685-0bb7bdd02de3",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans - required fields only + status Closed",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "29110c83-af18-4690-8465-b645b164a4cc",
								"type": "text/javascript",
								"exec": [
									"//the scenario should not be possible.  If the user checks in the item, the status should not be closed because as a result the user will have item listed as checked out when in fact the item is checked in.",
									"",
									"",
									"let response = JSON.parse(responseBody);",
									"pm.environment.set(\"generic_loanid\", response.id);",
									"",
									"pm.test(\"Status is 201\", function () {",
									"    pm.response.to.have.status(\"Created\");",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Response contains correct data\", function () {",
									"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\")); ",
									"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\")); ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"    pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "a0c38d04-ccaa-4139-b01d-ad429906b8a3",
								"type": "text/javascript",
								"exec": [
									"let today = new Date();",
									"let day = today.getDate();",
									"let month = today.getMonth() + 1; //January is 0!",
									"let year = today.getFullYear();",
									"",
									"if(day < 10) {",
									"    day = '0' + day;",
									"} ",
									"",
									"if(month < 10) {",
									"    month = '0'+ month;",
									"} ",
									"",
									"today = year + \"-\" + month + \"-\" + day;",
									"",
									"console.log(today);",
									"pm.variables.set(\"today\", today);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkedin\",\n\"status\": {\n        \"name\": \"Closed\"\n    }\n\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans - closed loans",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "75c42833-1e8e-42c3-9898-028a006bdd51",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Response contain correct data\", function(){",
									"    pm.expect(JSON.stringify(response)).to.contain(pm.environment.get(\"generic_loanid\"));",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   tv4.addSchema(\"loan.json\", JSON.parse(pm.environment.get(\"schema_loan_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loans_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans?query=status =\"Closed\"",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans"
							],
							"query": [
								{
									"key": "query",
									"value": "status =\"Closed\""
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans - by userId",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "644e590e-2770-4b5f-a84f-bdcea3fce4b7",
								"type": "text/javascript",
								"exec": [
									"var response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(\"OK\");",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   tv4.addSchema(\"loan.json\", JSON.parse(pm.environment.get(\"schema_loan_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loans_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"Response contain correct data\", function(){",
									"    pm.expect(JSON.stringify(response)).to.contain(pm.environment.get(\"circ_test_userid\"));",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans?query=userId={{circ_test_userid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans"
							],
							"query": [
								{
									"key": "query",
									"value": "userId={{circ_test_userid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans - by itemId",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1f2832a3-7999-49e6-ab69-9825ff1b8b9a",
								"type": "text/javascript",
								"exec": [
									"var response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(\"OK\");",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   tv4.addSchema(\"loan.json\", JSON.parse(pm.environment.get(\"schema_loan_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loans_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"Response contain correct data\", function(){",
									"    pm.expect(JSON.stringify(response)).to.contain(pm.environment.get(\"generic_loanid\"));",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans?query=itemId={{circ_test_itemid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans"
							],
							"query": [
								{
									"key": "query",
									"value": "itemId={{circ_test_itemid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans/{id}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ead51600-9a11-438b-97f9-28435179666e",
								"type": "text/javascript",
								"exec": [
									"var response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(\"OK\");",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"Response contain correct data\", function(){",
									"    pm.expect(response.id).to.equal(pm.environment.get(\"generic_loanid\"));",
									"    pm.expect(response.userId).to.equal(pm.environment.get(\"circ_test_userid\"));",
									"    pm.expect(response.itemId).to.equal(pm.environment.get(\"circ_test_itemid\"));",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{generic_loanid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans",
								"{{generic_loanid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans/{id}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "70528975-c42c-4768-8ee6-4dcb868a333d",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 204\", function () {",
									"    pm.response.to.have.status(\"No Content\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "834355ba-7b25-43ea-90a7-352cf885e629",
								"type": "text/javascript",
								"exec": [
									"let today = new Date();",
									"let day = today.getDate();",
									"let month = today.getMonth() + 1; //January is 0!",
									"let year = today.getFullYear();",
									"",
									"if(day < 10) {",
									"    day = '0' + day;",
									"} ",
									"",
									"if(month < 10) {",
									"    month = '0'+ month;",
									"} ",
									"",
									"today = year + \"-\" + month + \"-\" + day;",
									"",
									"console.log(today);",
									"pm.variables.set(\"today\", today);"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\"userId\": \"{{circ_test_userid}}\",\n\"itemId\":\"{{circ_test_itemid}}\",\n\"loanDate\": \"{{today}}\",\n\"action\": \"checkout\",\n\"status\": {\n        \"name\": \"Open\"\n    }\n\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{generic_loanid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans",
								"{{generic_loanid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans{id} - verify update",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bf9bf359-955f-43e3-8bb1-361d78a45878",
								"type": "text/javascript",
								"exec": [
									"var response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(\"OK\");",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"Response contain correct data\", function(){",
									"    pm.expect(response.id).to.equal(pm.environment.get(\"generic_loanid\"));",
									"    pm.expect(response.status.name).to.equal(\"Open\");",
									"    pm.expect(response.action).to.equal(\"checkout\")",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{generic_loanid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans",
								"{{generic_loanid}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "circulation/loans - negative scenarios",
			"description": null,
			"item": [
				{
					"name": "circulation/loans - invalid user and item",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2a306f41-43a3-4714-bf27-f472e210c21d",
								"type": "text/javascript",
								"exec": [
									"",
									"pm.test(\"New loan was not created. Status is 422\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"     pm.response.to.be.withBody;",
									"});",
									"",
									"var response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Body matches string\", function () {",
									"    pm.expect(response.errors[0].parameters[0].key).to.be.equal(\"itemId\");",
									"    pm.expect(response.errors[0].parameters[0].value).to.be.equal(\"itemfoo\");",
									"  ",
									"});",
									"",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"userId\": \"userfoo\",\r\n  \"itemId\": \"itemfoo\",\r\n  \"loanDate\": \"2018-01-12T13:12:16Z\",\r\n  \"action\": \"checkedout\",\r\n  \"status\": {\r\n    \"name\": \"Open\"\r\n  }\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans"
							]
						}
					},
					"response": []
				},
				{
					"name": "circulation/loans - invalid user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a2b0abeb-36cb-4b61-98b5-c5914aaed39b",
								"type": "text/javascript",
								"exec": [
									"var response = JSON.parse(responseBody);",
									"",
									"pm.test(\"New loan was not created. Status is 422\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"     pm.response.to.be.withBody;",
									"});",
									"",
									"pm.test(\"Body matches string\", function () {",
									"    pm.expect(response.errors[0].parameters[0].key).to.be.equal(\"itemId\");",
									"    pm.expect(response.errors[0].parameters[0].value).to.be.equal(\"459afaba-5b39-468d-9072-eb1685e0ddf4\");",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"userId\": \"userfoo\",\r\n  \"itemId\": \"459afaba-5b39-468d-9072-eb1685e0ddf4\",\r\n  \"loanDate\": \"2018-01-12T13:12:16Z\",\r\n  \"action\": \"checkedout\",\r\n  \"status\": {\r\n    \"name\": \"Open\"\r\n  }\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans/nonexistentloan",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "87fa7dc8-962b-47c7-9f4e-00bda306a023",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://{{url}}:9130/circulation/loans/foo",
							"protocol": "http",
							"host": [
								"{{url}}"
							],
							"port": "9130",
							"path": [
								"circulation",
								"loans",
								"foo"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "circulation/loan-rules",
			"description": null,
			"item": [
				{
					"name": "/circulation/loan-rules",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "50d6a575-ed84-4a8e-9f33-4419885ff44d",
								"type": "text/javascript",
								"exec": [
									"var response = JSON.parse(responseBody);",
									"",
									"//pm.environment.set(\"loanrulesid\", response.id);",
									"pm.environment.set(\"loanRulesAsTextFile\", JSON.stringify(response.loanRulesAsTextFile));",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan-rules_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loan-rules - invalid request",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8f214a1-88b9-43ef-a0e5-71d7be34505b",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 422\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"loanRulesAsTextFile\": \"invalid\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loan-rules - invalid json",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e234e065-0a80-40f4-946b-59a39a282f27",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 422\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"loanRulesAsTextFile\": \"invalid\",\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loan-rules",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "69ab6810-3e52-4c51-bba6-be0f38c1a264",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"loanRulesAsTextFile\": {{loanRulesAsTextFile}}\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loan-rules/apply - missing query parameters",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b652757f-803b-4dc1-bef9-93d031ba38d0",
								"type": "text/javascript",
								"exec": [
									"//query parameter is required now",
									"",
									"pm.test(\"Status is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules/apply",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules",
								"apply"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loan-rules/apply",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a1c250a5-18b6-4bea-932c-d5c444d778da",
								"type": "text/javascript",
								"exec": [
									"//This is really strange behavior  -it always return the same record - event though the provided parameters are invalid",
									"",
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan-policy-id_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules/apply?item_type_id={{$guid}}&loan_type_id={{$guid}}&patron_type_id={{$guid}}&shelving_location_id={{$guid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules",
								"apply"
							],
							"query": [
								{
									"key": "item_type_id",
									"value": "{{$guid}}"
								},
								{
									"key": "loan_type_id",
									"value": "{{$guid}}"
								},
								{
									"key": "patron_type_id",
									"value": "{{$guid}}"
								},
								{
									"key": "shelving_location_id",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loan-rules/apply-all - missing query parameters",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "fea31e63-91cd-41d1-9dd1-4a6b386f8ca6",
								"type": "text/javascript",
								"exec": [
									"//query parameter is required now",
									"",
									"pm.test(\"Status is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules/apply-all",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules",
								"apply-all"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loan-rules/apply-all",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "098acf15-d61f-4afe-91b9-e9e5738876ad",
								"type": "text/javascript",
								"exec": [
									"//This is really strange behavior  -it always return the same record - event though the provided parameters are invalid",
									"",
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(\"OK\");",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"loan-rule-match.json\", JSON.parse(pm.environment.get(\"schema_loan-rule-match_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_loan-rule-matches_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loan-rules/apply-all?item_type_id={{$guid}}&loan_type_id={{$guid}}&patron_type_id={{$guid}}&shelving_location_id={{$guid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loan-rules",
								"apply-all"
							],
							"query": [
								{
									"key": "item_type_id",
									"value": "{{$guid}}"
								},
								{
									"key": "loan_type_id",
									"value": "{{$guid}}"
								},
								{
									"key": "patron_type_id",
									"value": "{{$guid}}"
								},
								{
									"key": "shelving_location_id",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "circulation/requests",
			"description": null,
			"item": [
				{
					"name": "/circulation/requests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ecd81156-5dcf-4f9d-be1c-87eb5d2e6bda",
								"type": "text/javascript",
								"exec": [
									"// ///Set test data",
									"var response = JSON.parse(responseBody);",
									"// if(response.requests.length >0){",
									"// pm.environment.set(\"existingrequestid\", response.requests[0].id)",
									"// }",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   tv4.addSchema(\"request.json\", JSON.parse(pm.environment.get(\"schema_request_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_requests_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/requests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ab4e89dc-0af6-48b4-a23e-6ce3e903dd45",
								"type": "text/javascript",
								"exec": [
									"var response = JSON.parse(responseBody);",
									"pm.environment.set(\"newrequestid\", response.id);",
									"",
									"pm.test(\"Status is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_request_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4f8dfafc-387e-4388-be01-b4b8a76325a4",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"requestType\": \"Hold\",\r\n  \"requestDate\": \"2018-07-29T22:25:37Z\",\r\n  \"requesterId\": \"{{circ_test_userid}}\",\r\n  \"itemId\": \"{{circ_test_itemid}}\",\r\n  \"fulfilmentPreference\": \"Hold Shelf\",\r\n  \"requestExpirationDate\": \"2018-07-25\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/requests{{loanuserid}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e3603091-8a78-4be4-bc69-4d8a10dedcab",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   tv4.addSchema(\"request.json\", JSON.parse(pm.environment.get(\"schema_request_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_requests_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"",
									"//verify headers",
									"// pm.test(\"'Content-Type'header is present and has 'application/json' value\", function () {",
									"//     pm.response.to.have.header(\"Content-Type\");",
									"//     pm.expect(pm.response.headers.get(\"Content-Type\")).to.be.equal(\"application/json\");",
									"// });",
									"",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"// pm.test(\"'accept' header is present and has correct value\", function () {",
									"//     pm.response.to.have.header(\"accept\");",
									"//     pm.expect(pm.response.headers.get(\"accept\")).to.be.equal(\"*/*\"); ",
									"// });",
									"",
									"// pm.test(\"'accept-encoding' header is present and has correct value\", function () {",
									"//     pm.response.to.have.header(\"accept-encoding\");",
									"//     pm.expect(pm.response.headers.get(\"accept-encoding\")).to.be.equal(\"gzip, deflate\");",
									"// });",
									"",
									"",
									"// pm.test(\"'connection' header is present and has correct value\", function () {",
									"//     pm.response.to.have.header(\"connection\");",
									"//     pm.expect(pm.response.headers.get(\"connection\")).to.be.equal(\"keep-alive\");",
									"// });",
									"",
									"// pm.test(\"'host' header is present\", function () {",
									"//     pm.response.to.have.header(\"host\");",
									"//   // var hostHeaderValue = pm.environment.get(\"url\") + \":\" + pm.environment.get(\"okapiport\");",
									"//   // pm.expect(pm.response.headers.get(\"host\")).to.be.equal(hostHeaderValue);",
									"// });",
									"",
									"// pm.test(\"'x-okapi-module-permissions' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-module-permissions\");",
									"// });",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"// pm.test(\"'x-okapi-permissions-required' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-permissions-required\");",
									"// });",
									"",
									"// pm.test(\"'x-okapi-permissions' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-permissions\");",
									"// });",
									"",
									"// pm.test(\"'x-okapi-request-id' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-request-id\");",
									"// });",
									"",
									"// pm.test(\"'x-okapi-tenant' header is present and has correct value\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-tenant\");",
									"//     pm.expect(pm.response.headers.get(\"x-okapi-tenant\")).to.be.equal(pm.environment.get(\"xokapitenant\"));",
									"// });",
									"",
									"// pm.test(\"'x-okapi-token' header is present and has correct value\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-token\");",
									"//     pm.expect(pm.response.headers.get(\"x-okapi-token\")).to.be.equal(pm.environment.get(\"xokapitoken\"));",
									"// });",
									"",
									"// pm.test(\"'x-okapi-url' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-url\");",
									"// });",
									"",
									"// pm.test(\"'x-okapi-user-id' header is present\", function () {",
									"//     pm.response.to.have.header(\"x-okapi-user-id\");",
									"// });",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests?query=requesterId={{circ_test_userid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests"
							],
							"query": [
								{
									"key": "query",
									"value": "requesterId={{circ_test_userid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/requests - item does not exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1bd6ef13-fe8f-49f8-96a3-bad492e6987d",
								"type": "text/javascript",
								"exec": [
									"let jsonData = pm.response.json();",
									"    ",
									"pm.test(\"Status is 422\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"    let schema_parameters = JSON.parse(pm.variables.get(\"schema_parameters_content\"));",
									"    tv4.addSchema(pm.variables.get(\"schema_parameters\"), schema_parameters);",
									"    if (schema_parameters.id) {",
									"        tv4.addSchema(schema_parameters.id, schema_parameters);",
									"    }",
									"    let schema_error = JSON.parse(pm.variables.get(\"schema_error_content\"));",
									"    tv4.addSchema(pm.variables.get(\"schema_error\"), schema_error);",
									"    if (schema_error.id) {",
									"        tv4.addSchema(schema_error.id, schema_error);",
									"    }",
									"    ",
									"    pm.expect(tv4.validate(jsonData, JSON.parse(pm.environment.get(\"schema_errors_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"    pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"",
									"});",
									"",
									"var response = JSON.parse(responseBody);",
									"pm.test('Response contains correct error message', function() {",
									"  pm.expect(response.errors[0].parameters[0].value).to.eql(\"invaliditemid\");",
									"  pm.expect(response.errors[0].parameters[0].key).to.eql(\"itemId\");",
									"});",
									"",
									"//verify headers",
									"pm.test(\"'Transfer-Encoding' header is present and has 'chunked' value\", function () {",
									"    pm.response.to.have.header(\"Transfer-Encoding\");",
									"    pm.expect(pm.response.headers.get(\"Transfer-Encoding\")).to.be.equal(\"chunked\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"requestType\": \"Recall\",\r\n  \"requestDate\": \"2018-07-29\",\r\n  \"requesterId\": \"{{circ_test_userid}}\",\r\n  \"itemId\": \"invaliditemid\",\r\n  \"fulfilmentPreference\": \"Hold Shelf\",\r\n  \"requestExpirationDate\": \"2017-07-25\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/requests/{{newrequestid}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "96f08fe9-3bd5-4da1-8c44-69b39f5de474",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_request_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests/{{newrequestid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests",
								"{{newrequestid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/requests{{newrequestid}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5bcc5b59-a76a-462b-b524-e81237ddc002",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"id\": \"{{newrequestid}}\",\r\n  \"requestType\": \"Page\",\r\n  \"requestDate\": \"2018-07-29T22:25:37Z\",\r\n  \"requesterId\": \"{{circ_test_userid}}\",\r\n  \"itemId\": \"{{circ_test_itemid}}\",\r\n  \"fulfilmentPreference\": \"Hold Shelf\",\r\n  \"requestExpirationDate\": \"2017-07-25\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests/{{newrequestid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests",
								"{{newrequestid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/requests/{{newrequestid}} - verify update",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "25f063ef-525c-4045-b4c3-98a50879684c",
								"type": "text/javascript",
								"exec": [
									"let response = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"pm.test(\"Correct data is returned\", function () {",
									"    pm.expect(response.requestType).to.equal(\"Page\");",
									"});",
									"",
									"pm.test(\"Validate schema\", function () {",
									"   tv4.addSchema(\"raml-util/schemas/metadata.schema\", JSON.parse(pm.variables.get(\"schema_metadata_content\")));",
									"   pm.expect(tv4.validate(response, JSON.parse(pm.environment.get(\"schema_request_content\")))).to.equal(true, \"Schema validation error: \" + JSON.stringify(tv4.error));",
									"   pm.expect(tv4.missing.length).to.equal(0, \"Missing schemas: \" + JSON.stringify(tv4.missing));",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests/{{newrequestid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests",
								"{{newrequestid}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "cleanup",
			"description": null,
			"item": [
				{
					"name": "/circulation/requests/{{newrequestid}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b8dd3316-4c1b-49fc-a305-3e869d93f99e",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"id\": \"{{existingrequestid}}\",\r\n  \"requestType\": \"Page\",\r\n  \"requestDate\": \"2018-07-29T22:25:37Z\",\r\n  \"requesterId\": \"{{loanuserid}}\",\r\n  \"itemId\": \"{{loanitemid}}\",\r\n  \"fulfilmentPreference\": \"Hold Shelf\",\r\n  \"requestExpirationDate\": \"2017-07-25\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests/{{newrequestid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests",
								"{{newrequestid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/requests/{{newrequestid}} - verfiy delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4214cebe-7027-41d6-9b12-ca3ac7728422",
								"type": "text/javascript",
								"exec": [
									"",
									"pm.test(\"Status is 400\", function () {",
									"    pm.response.to.have.status(\"Not Found\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/requests/{{newrequestid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"requests",
								"{{newrequestid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans/{id}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "90b9aea6-80f5-46b6-878a-a3f7d3477e70",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 204\", function () {",
									"    pm.response.to.have.status(\"No Content\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{generic_loanid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans",
								"{{generic_loanid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/circulation/loans{id} - verify delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d78b5edf-e76d-48aa-bd02-297c58f975c7",
								"type": "text/javascript",
								"exec": [
									"",
									"pm.test(\"Status is 404\", function () {",
									"    pm.response.to.have.status(\"Not Found\");",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"",
									"pm.environment.unset(\"circ_test_userid\");",
									"pm.environment.unset(\"circ_test_itemid\");",
									"pm.environment.unset(\"test_recipientId\");",
									"pm.environment.unset(\"generic_loanid\");",
									"pm.environment.unset(\"loanRulesAsTextFile\");",
									"pm.environment.unset(\"newrequestid\");",
									"",
									"",
									"//schema variables",
									"pm.environment.unset(\"schema_parameters_content\");",
									"pm.environment.unset(\"schema_error_content\");",
									"pm.environment.unset(\"schema_errors_content\");",
									"pm.environment.unset(\"schema_metadata_content\");",
									"pm.environment.unset(\"schema_loans_content\");",
									"pm.environment.unset(\"schema_loan_content\");",
									"pm.environment.unset(\"schema_loan-rules_content\");",
									"pm.environment.unset(\"schema_loan-rule_content\");",
									"pm.environment.unset(\"schema_loan-rule-matches_content\");",
									"pm.environment.unset(\"schema_loan-rule-match_content\");",
									"pm.environment.unset(\"schema_requests_content\");",
									"pm.environment.unset(\"schema_request_content\");",
									"pm.environment.unset(\"schema_loan-policy-id_content\");",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/circulation/loans/{{generic_loanid}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"circulation",
								"loans",
								"{{generic_loanid}}"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "bd336eec-9214-4ee9-8979-19fda6d938b2",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "42c60b31-caea-44d3-89f5-260cf60efc3f",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "e54e8577-475e-4d00-b0a9-d6bcc95177f3",
			"key": "mod_name",
			"value": "mod-circulation",
			"type": "string"
		},
		{
			"id": "9a892f85-8454-45dc-a6f1-39e2f428bc86",
			"key": "mod_version",
			"value": "v10.7.0",
			"type": "string"
		},
		{
			"id": "183ed0da-e63b-4c92-91a9-f571e7695653",
			"key": "schema_loc",
			"value": "https://raw.githubusercontent.com/folio-org",
			"type": "string"
		},
		{
			"id": "55558d47-7695-46da-8607-9b25bb982608",
			"key": "schema_error",
			"value": "error.schema",
			"type": "string"
		},
		{
			"id": "eb4a8d4a-e3c8-4f5e-8f10-1c0f0200eb38",
			"key": "schema_errors",
			"value": "errors.schema",
			"type": "string"
		},
		{
			"id": "dfb8d40c-e77e-4b2d-9273-e52d2b3eb279",
			"key": "schema_parameters",
			"value": "parameters.schema",
			"type": "string"
		},
		{
			"id": "423f4fb0-ba68-413d-aa82-5b4fa00d9375",
			"key": "schema_metadata",
			"value": "metadata.schema",
			"type": "string"
		},
		{
			"id": "b7a08955-f269-4e2b-a831-001290557cea",
			"key": "schema_loans",
			"value": "loans.json",
			"type": "string"
		},
		{
			"id": "6e3d0208-a0f9-47cc-b053-67564461b708",
			"key": "schema_loan",
			"value": "loan.json",
			"type": "string"
		},
		{
			"id": "a07865bb-eb96-4b2d-aa99-77a158213067",
			"key": "schema_loan-rules",
			"value": "loan-rules.json",
			"type": "string"
		},
		{
			"id": "4372afe9-cb2b-4b91-a59d-f92c1373b667",
			"key": "schema_loan-rule-matches",
			"value": "loan-rule-matches.json",
			"type": "string"
		},
		{
			"id": "5a21da78-bb7c-42cf-9c37-f1bf480875f3",
			"key": "schema_loan-rule-match",
			"value": "loan-rule-match.json",
			"type": "string"
		},
		{
			"id": "67a9f458-13b9-46fb-bff4-125a0dbf48b9",
			"key": "schema_loan-policy-id",
			"value": "loan-policy-id.json",
			"type": "string"
		},
		{
			"id": "ebca2b43-280c-4663-be3c-433ec3120e58",
			"key": "schema_requests",
			"value": "requests.json",
			"type": "string"
		},
		{
			"id": "8ea01a62-490c-43a6-b131-d74420cb3a1b",
			"key": "schema_request",
			"value": "request.json",
			"type": "string"
		}
	]
}